<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style> head, body
    {
        width:100%;
        height:100%;
        margin:0;
        padding:0;
        overflow: hidden;
    }</style>
</head>
<body>
<script src="../../mixIn.js"></script>
<script src="Constants.js"></script>
<script src="TreeMap.js"></script>
<script src="TreeMapItem.js"></script>
<script src="layouts/SquarifiedLayout.js"></script>
<script src="layouts/SliceDiceLayout.js"></script>

<script src="../../../../base.js"></script>
<script src="../../../../geom.js"></script>
<script src="../../../../graphics.js"></script>

<script>

    var G = new Graphics(ctx);

    var values = [];
    for( var i = 0; i< 10; i++ )
    {
        var r = ~~( 0x80 + Math.random() * 0x80 );
        var g = ~~( 0x80 + Math.random() * 0x80 );
        var b = ~~( 0x80 + Math.random() * 0x80 );

        values.push(    {   weight : Math.random(),
                            color: 'rgb('+r+','+g+','+b+')' } );
    }

    function sort(a,b){return a.weight-b.weight; }
    function draw()
    {

        values.forEach(function(v){v.weight = Math.random();});

        var tree = new TreeMap( TreeMap.LAYOUT_SQUARIFIED, TreeMap.HORIZONTAL );

        var items = tree.compute( values, "weight", new Rectangle(0,0,h,h),  sort );
        items.forEach( function(i)
        {
            var r = i.rect;
//            console.log( i )
//            console.log( r )
            //var R = ~~( 0x80 + Math.random() * 0x80 );
            //var G = ~~( 0x80 + Math.random() * 0x80 );
            //var B = ~~( 0x80 + Math.random() * 0x80 );
            //R = G = B = ~~( 0xFF * i.weight );
            //'rgb('+R+','+G+','+B+')';

            ctx.strokeStyle = ctx.fillStyle = i.color;
            ctx.fillRect(r.x, r.y, r.width, r.height );
            ctx.strokeRect(r.x, r.y, r.width, r.height );
        })

    }
    window.addEventListener( "resize", draw, false );
    window.onload = function()
    {
        draw();
    }

</script>

</body>
</html>